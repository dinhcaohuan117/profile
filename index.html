<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <title>Dinh Cao Huan ‚Äì CV & Portfolio</title>
  
  <!-- 1. T·∫£i Font (t·ª´ CV) -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet"> -->
  
  <!-- 2. T·∫£i Tailwind CSS (v3 Play CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 3. T·∫£i Chart.js (t·ª´ Dashboard) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- 4. C·∫•u h√¨nh Tailwind ƒë·ªÉ d√πng font Poppins -->
  <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'sans': ['Arial', 'sans-serif'],
                },
            }
        }
    }
  </script>

  <!-- 5. G·ªôp CSS t·ª´ c·∫£ 2 t·ªáp -->
  <style>
    /* --- T·ª´ CV.html --- */
    body {
      /* ƒê·∫∑t m√†u n·ªÅn ch√≠nh t·ª´ CV.html */
      background-color: #0a1a2f;
      color: #e0e6ed;
      font-family: 'Arial', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    h1, h2 {
      color: #f5f7fa;
      font-weight: 600;
    }
    .card {
      border: 1px solid rgba(192, 192, 192, 0.25);
      background: rgba(15, 25, 45, 0.8);
      backdrop-filter: blur(8px);
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      font-weight: 500;
      padding: 1rem;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.15);
    }
    .popup {
      background-color: #101b33;
      color: #f1f5f9;
      border: 1px solid rgba(192, 192, 192, 0.35);
      border-radius: 16px;
      width: 90%;
      max-width: 800px;
      padding: 1.25rem;
      overflow-y: auto;
      max-height: 85vh;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
    }
    .divider {
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      margin: 1rem 0;
    }
    /* Ghi ƒë√® style n√∫t c·ªßa CV ƒë·ªÉ t∆∞∆°ng th√≠ch v3 */
    button {
      background-color: #173d7a;
      border: 1px solid #2e69c4;
      color: #fff;
      border-radius: 12px;
      padding: 0.75rem 1.25rem;
      font-weight: 500;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    button:hover {
      background-color: #285bb3;
      transform: translateY(-2px);
    }
    @media (max-width: 640px) {
      .card {
        padding: 0.75rem;
        font-size: 0.9rem;
      }
      img {
        /* ƒê·∫£m b·∫£o ·∫£nh CV kh√¥ng b·ªã ·∫£nh h∆∞·ªüng */
        width: 96px !important;
        height: 96px !important;
      }
    }
    
    /* --- T·ª´ Dashboard.html --- */
    .tab-active {
        border-bottom-color: #3b82f6 !important; /* blue-500 */
        color: #3b82f6 !important; /* blue-500 */
        font-weight: 600;
    }
    
    .filter-active {
         background-color: #3b82f6 !important; /* blue-600 */
         color: #ffffff !important;
    }
    
    /* --- Style cho Nav m·ªõi --- */
    .nav-button-active {
        color: #ffffff !important;
        border-bottom-color: #3b82f6 !important; /* blue-500 */
    }

  </style>
</head>

<body class="min-h-screen">

  <!-- ***** THANH ƒêI·ªÄU H∆Ø·ªöNG M·ªöI ***** -->
  <nav class="bg-gray-800 p-4 sticky top-0 z-40 shadow-lg mb-8" style="background-color: #101b33; border-bottom: 1px solid rgba(192, 192, 192, 0.25);">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
          <h1 class="text-xl font-bold text-white">Dinh Cao Huan</h1>
          <div class="flex gap-4">
              <button id="nav-cv" class="nav-button nav-button-active py-2 px-3 text-white font-semibold border-b-2 border-blue-500 transition-colors">
                  Introduction (CV)
              </button>
              <button id="nav-portfolio" class="nav-button py-2 px-3 text-gray-400 font-semibold border-b-2 border-transparent hover:text-white transition-colors">
                  Project Sample (Portfolio)
              </button>
          </div>
      </div>
  </nav>

  <!-- ***** N·ªòI DUNG CH√çNH ***** -->
  <main class="p-4 sm:p-6">
  
      <!-- =================================== -->
      <!-- N·ªòI DUNG TRANG 1: CV (T·ª™ HuanDinhCV.html) -->
      <!-- =================================== -->
      <div id="page-cv">
        <!-- Profile Card -->
        <div class="text-center mb-8 bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-2xl hover:shadow-blue-500/30 transition-transform transform hover:-translate-y-1 w-full max-w-sm sm:max-w-md mx-auto" style="background: rgba(15, 25, 45, 0.8); border: 1px solid rgba(192, 192, 192, 0.25);">
          <!-- Profile Image -->
          <img 
            src="https://i.postimg.cc/L5D46z3q/cv-photo-portrait-1.jpg"
            alt="Profile Photo" 
            class="w-32 h-32 rounded-full mx-auto mb-4 shadow-lg border-4 border-blue-500 object-cover"
          />
          <h1 class="text-2xl sm:text-3xl mb-2 font-semibold tracking-wide">DINH CAO HUAN</h1>
          <p class="text-base sm:text-lg text-blue-200">Risk Management<br>Business Intelligence<br>Data Analytics</p>
          <p class="text-xs sm:text-sm mt-2 text-gray-400 leading-relaxed">
            üìû 0786.29.9683 | üìß dinhcaohuan117@gmail.com<br>
            üìç Ban Co Ward, Ho Chi Minh City, Vietnam<br>
            üë§ Gender: Male | üéÇ DOB: 1992
          </p>
      
          <!-- Download Button -->
          <div class="mt-5">
            <a 
              href="https://drive.google.com/uc?export=download&id=1FVs7HDqZzMmCj-ncfDC-l9RoZaHPAXiR"
              download="DinhCaoHuan_CV.pdf"
              class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-full shadow-md transition duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg"
              style="background-color: #173d7a; border: 1px solid #2e69c4;"
            >
              ‚¨áÔ∏è Download CV
            </a>
          </div>
        </div>
      
        <!-- Section Buttons (Content is already English) -->
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 sm:gap-6 w-full max-w-5xl mx-auto">
          <button onclick="openPopup('summary')" class="card">Summary</button>
          <button onclick="openPopup('core')" class="card">Core Competencies</button>
          <button onclick="openPopup('work')" class="card">Work Experience</button>
          <button onclick="openPopup('skills')" class="card">Skills</button>
          <button onclick="openPopup('education')" class="card">Education</button>
          <button onclick="openPopup('highlights')" class="card">Highlights</button>
          <button onclick="openPopup('certifications')" class="card">Certifications</button>
          <button onclick="openPopup('references')" class="card">References</button>
        </div>
      
        <!-- Overlay Popup -->
        <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 px-2">
          <div class="popup relative">
            <button class="absolute top-3 right-4 text-gray-400 hover:text-gray-100 text-xl" onclick="closePopup()" style="background: transparent; border: none; padding: 0;">‚úï</button>
            <div id="popup-content"></div>
          </div>
        </div>
      </div>

      <!-- =================================== -->
      <!-- N·ªòI DUNG TRANG 2: PORTFOLIO (T·ª™ Dashboard.html) -->
      <!-- =================================== -->
      <div id="page-portfolio" class="hidden">
        <div class="max-w-7xl mx-auto">
            <!-- TI√äU ƒê·ªÄ CH√çNH -->
            <header class="mb-6">
                <h1 class="text-3xl font-bold text-white">Credit Risk Analytics Dashboard</h1>
                <p class="text-lg text-slate-400">Portfolio Project: Risk Data Analysis and Visualization</p>
            </header>
    
            <!-- THANH ƒêI·ªÄU H∆Ø·ªöNG TAB -->
            <nav class="flex border-b border-slate-700 mb-6">
                <button class="tab-button py-3 px-4 md:px-6 text-slate-400 border-b-2 border-transparent hover:text-white transition-colors" data-tab="overview" style="background: transparent; border-color: transparent;">
                    Portfolio Overview
                </button>
                <button class="tab-button py-3 px-4 md:px-6 text-slate-400 border-b-2 border-transparent hover:text-white transition-colors" data-tab="segmentation" style="background: transparent; border-color: transparent;">
                    Segmentation & Underwriting
                </button>
                <button class="tab-button py-3 px-4 md:px-6 text-slate-400 border-b-2 border-transparent hover:text-white transition-colors" data-tab="trends" style="background: transparent; border-color: transparent;">
                    Performance & Trends
                </button>
            </nav>
    
            <!-- N·ªòI DUNG C√ÅC TAB -->
            <main>
                <!-- ======================= -->
                <!-- TAB 1: T·ªîNG QUAN (SLIDE 1) -->
                <!-- ======================= -->
                <div id="overview" class="tab-panel space-y-6">
                    <!-- D√†n b√†i cho c√°c th·∫ª KPI -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Th·∫ª KPI 1 -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">Total Outstanding Balance</h3>
                            <p class="text-3xl font-bold text-white mt-2">$1.25 B</p>
                            <p class="text-sm text-green-400 mt-1">+2.5% vs. previous month</p>
                        </div>
                        <!-- Th·∫ª KPI 2 -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">NPL Rate</h3>
                            <p class="text-3xl font-bold text-red-500 mt-2">3.15%</p>
                            <p class="text-sm text-red-400 mt-1">+0.12% vs. previous month</p>
                        </div>
                        <!-- Th·∫ª KPI 3 -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">Avg. Risk Score</h3>
                            <p class="text-3xl font-bold text-white mt-2">642</p>
                            <p class="text-sm text-green-400 mt-1">-5 points (better)</p>
                        </div>
                        <!-- Th·∫ª KPI 4 -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">New Loans</h3>
                            <p class="text-3xl font-bold text-white mt-2">1,820</p>
                            <p class="text-sm text-slate-400 mt-1">this month</p>
                        </div>
                    </div>
    
                    <!-- D√†n b√†i cho bi·ªÉu ƒë·ªì -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Bi·ªÉu ƒë·ªì l·ªõn -->
                        <div class="lg:col-span-2 bg-slate-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4">Outstanding Balance by Risk Level</h3>
                            <div class="h-80">
                                <canvas id="overviewChart"></canvas>
                            </div>
                        </div>
                        <!-- Bi·ªÉu ƒë·ªì nh·ªè -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4">Risk Distribution</h3>
                            <div class="h-80 flex items-center justify-center">
                                <canvas id="riskDonutChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- =========================== -->
                <!-- TAB 2: PH√ÇN KH√öC (SLIDE 2) -->
                <!-- =========================== -->
                <div id="segmentation" class="tab-panel hidden space-y-6">
                    <!-- KPI Th·∫©m ƒë·ªãnh -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">Approval Rate</h3>
                            <p class="text-3xl font-bold text-white mt-2">42.5%</p>
                            <p class="text-sm text-green-400 mt-1">+1.2% vs. previous month</p>
                        </div>
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all">
                            <h3 class="text-sm font-medium text-slate-400 uppercase">Payment Default Rate</h3>
                            <p class="text-3xl font-bold text-red-500 mt-2">4.8%</p>
                            <p class="text-sm text-red-400 mt-1">Target: < 4.5%</p>
                        </div>
                    </div>
    
                    <!-- ***** B·ªò L·ªåC S·∫¢N PH·∫®M M·ªöI ***** -->
                    <div class="bg-slate-800 p-4 rounded-lg shadow-lg">
                         <h3 class="text-sm font-medium text-slate-400 uppercase mb-3">Filter by Product</h3>
                        <div class="flex flex-wrap gap-2">
                            <button class="product-filter-btn filter-active py-2 px-4 rounded-lg bg-blue-600 text-white text-sm font-medium transition-all" data-product="all" style="border: 1px solid #2e69c4;">
                                All Products
                            </button>
                            <button class="product-filter-btn py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 text-sm font-medium transition-all" data-product="unsecured" style="background-color: #334155; border: 1px solid #475569;">
                                Unsecured Loan
                            </button>
                            <button class="product-filter-btn py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 text-sm font-medium transition-all" data-product="cc" style="background-color: #334155; border: 1px solid #475569;">
                                Credit Card
                            </button>
                            <button class="product-filter-btn py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 text-sm font-medium transition-all" data-product="bnpl" style="background-color: #334155; border: 1px solid #475569;">
                                BNPL
                            </button>
                        </div>
                    </div>
                    <!-- ***** K·∫æT TH√öC B·ªò L·ªåC ***** -->
    
    
                    <!-- Bi·ªÉu ƒë·ªì Ph√¢n kh√∫c & Th·∫©m ƒë·ªãnh -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Bi·ªÉu ƒë·ªì 1: L√Ω do T·ª´ ch·ªëi -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4">Reject Reason Analysis</h3>
                            <div class="h-96 flex items-center justify-center">
                                <canvas id="rejectReasonChart"></canvas>
                            </div>
                        </div>
                        <!-- Bi·ªÉu ƒë·ªì 2: Ph√¢n b·ªï ƒêi·ªÉm Score -->
                        <div class="bg-slate-800 p-6 rounded-lg shadow-lg">
                            <h3 class="text-lg font-semibold mb-4">Score Distribution (by Product)</h3>
                            <div class="h-96">
                                <canvas id="scoreDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- ======================== -->
                <!-- TAB 3: XU H∆Ø·ªöNG (SLIDE 3) -->
                <!-- ======================== -->
                <div id="trends" class="tab-panel hidden space-y-6">
                    <!-- Bi·ªÉu ƒë·ªì 1: NPL -->
                    <div class="bg-slate-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">NPL Rate Over Time</h3>
                        <div class="h-80">
                            <canvas id="trendsChart1"></canvas>
                        </div>
                    </div>
                    <!-- Bi·ªÉu ƒë·ªì 2: Vintage -->
                    <div class="bg-slate-800 p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">Vintage Analysis (Roll Rate by DPD 30+)</h3>
                        <p class="text-sm text-slate-400 mb-4">Tracking NPL rates of loan cohorts by disbursement month.</p>
                        <div class="h-96">
                            <canvas id="vintageChart"></canvas>
                        </div>
                    </div>
                </div>
            </main>
        </div>
      </div>
      
  </main>


  <!-- =================================== -->
  <!-- ***** PH·∫¶N SCRIPT G·ªòP ***** -->
  <!-- =================================== -->

  <!-- 1. Script t·ª´ CV.html (Popup) -->
  <script>
    // CV Content (already in English)
    const contents = {
      summary: `
        <h2>PROFESSIONAL SUMMARY</h2><div class="divider"></div>
        <p>Banking and fintech professional with 8+ years of experience, including 3 years in Risk Management and Data Analytics. Strong expertise in turning data into insights that enhance risk governance and business performance. Skilled in automation, policy design, and cross-functional collaboration. Proficient in Python, SQL, and Excel for credit risk monitoring and compliance.</p>
      `,
      core: `
        <h2>CORE COMPETENCIES</h2><div class="divider"></div>
        <ul class="list-disc ml-6 space-y-2">
          <li>Credit & Operational Risk Management</li>
          <li>Portfolio Performance Analytics & Monitoring</li>
          <li>Automated Reporting & Dashboard Development</li>
          <li>Process Optimization & Workflow Automation</li>
          <li>Stakeholder Engagement & Cross-functional Collaboration</li>
        </ul>
      `,
      work: `
        <h2>WORK EXPERIENCE</h2><div class="divider"></div>
        <p><strong>Assistant Manager ‚Äì Retail Risk, Risk Management | CIMB Bank Vietnam</strong> (09/2023 ‚Äì 06/2025)</p>
        <ul class="list-disc ml-6 mb-4">
          <li>Automated and enhanced end-to-end credit portfolio and performance reports across multiple lending products.</li>
          <li>Developed early warning indicators (FPD, SPD) to strengthen risk detection.</li>
          <li>Built and maintained CIC reports using SQL and Python on BigQuery and RStudio.</li>
          <li>Prepared group-level portfolio performance and risk appetite monitoring reports.</li>
          <li>Partnered with Underwriting, Fraud, and Collections for mitigation strategies.</li>
          <li>Monitored KRIs and ensured compliance as DCORO.</li>
        </ul>
        <p><strong>Senior Credit Risk Policy Specialist | MOVI VIET NAM</strong> (11/2022 ‚Äì 08/2023)</p>
        <ul class="list-disc ml-6 mb-4">
          <li>Built automated BI dashboards for real-time risk monitoring.</li>
          <li>Provided data-driven insights for policy improvements.</li>
          <li>Integrated analytics into underwriting and fraud detection strategies.</li>
        </ul>
        <p><strong>Senior Credit Risk Policy & Process Specialist | FE CREDIT</strong> (05/2022 ‚Äì 11/2022)</p>
        <ul class="list-disc ml-6 mb-4">
          <li>Developed credit risk policies using data analytics for POS & E-Commerce loans.</li>
          <li>Monitored portfolio trends to trigger corrective actions.</li>
        </ul>
        <p><strong>Senior Credit Card Underwriter | Nam A Bank</strong> (05/2017 ‚Äì 05/2022)</p>
        <ul class="list-disc ml-6">
          <li>Managed credit card underwriting to optimize approval quality and minimize delinquencies.</li>
          <li>Collaborated with Risk and Fraud teams for early delinquency detection.</li>
          <li>Mentored junior underwriters and supported policy refinements.</li>
        </ul>
      `,
      skills: `
        <h2>SKILLS</h2><div class="divider"></div>
        <ul class="list-disc ml-6 space-y-2">
          <li><strong>Technical:</strong> SQL (Advanced), Python, Excel (VBA, Power Query), Power BI, Google BigQuery</li>
          <li><strong>Risk & Compliance:</strong> Credit & Operational Risk Management, Portfolio Monitoring, RCSA, LED, CIM, KRI</li>
          <li><strong>Soft Skills:</strong> Analytical Thinking, Problem Solving, Leadership, Collaboration</li>
        </ul>
      `,
      education: `
        <h2>EDUCATION</h2><div class="divider"></div>
        <p><li><strong>Bachelor‚Äôs Degree in Finance ‚Äì Banking</strong><br>Ho Chi Minh City Open University | 09/2022 ‚Äì 11/2024 | GPA: 3.49 / 4.00</p>
        <p><li><strong>Associate‚Äôs Degree in Finance ‚Äì Banking</strong><br>HCMC Institute of Applied Science & Technology | 10/2010 ‚Äì 10/2013</p>
        <p><li><strong>IIG Viet Nam</strong> | TOEIC 800/990</p>
      `,
      highlights: `
        <h2>KEY HIGHLIGHTS</h2><div class="divider"></div>
        <ul class="list-disc ml-6 space-y-2">
          <li>Built and automated risk and operational reports using SQL, Python, and Excel.</li>
          <li>Led development of CIC reporting in compliance with Circular 15.</li>
          <li>Expertise in data analytics and risk monitoring for retail lending portfolios.</li>
          <li>Strong collaboration with cross-functional stakeholders.</li>
        </ul>
      `,
      certifications: `
        <h2>CERTIFICATIONS</h2><div class="divider"></div>
        <ul class="list-disc ml-6 space-y-1">
          <li>2025 HackerRank: SQL Advanced</li>
          <li>2024 LinkedIn Learning: Human Skills for Managers Professional Certificate</li>
          <li>2023 NYIF: Credit Risk Management</li>
          <li>2023 Google: Data Analytics Professional Certificate</li>
          <li>2023 IBM: Data Analysis with Python</li>
          <li>2022 CyberSoft: Practical Data Analytics with Python</li>
        </ul>
      `,
      references: `
        <h2>REFERENCES</h2><div class="divider"></div>
        <p><li><strong>Chu Nguy√™n T√∫</strong> ‚Äì Vice President ‚Äì Credit Risk, CIMB Vietnam</p>
        <p><li><strong>Nguy·ªÖn VƒÉn Qu·ª≥nh</strong> ‚Äì Senior Underwriting Strategy Manager, MOVI Vietnam</p>
        <p><li><strong>ƒêinh VƒÉn Hi·ªáu</strong> ‚Äì Assistant Manager ‚Äì Risk Management, CIMB Vietnam</p><br>
        <p>üìû Phone available upon request</p>
      `
    };

    function openPopup(section) {
      document.getElementById('popup-content').innerHTML = contents[section];
      document.getElementById('overlay').classList.remove('hidden');
    }

    function closePopup() {
      document.getElementById('overlay').classList.add('hidden');
    }
  </script>

  <!-- 2. Script t·ª´ Dashboard.html (Tabs, Charts) + Logic Nav M·ªõi -->
  <script>
        // --- BI·∫æN TO√ÄN C·ª§C CHO CHART TAB 2 ---
        let rejectReasonChartInstance;
        let scoreDistributionChartInstance;

        // --- D·ªÆ LI·ªÜU GI·∫¢ L·∫¨P CHO C√ÅC PH√ÇN KH√öC ---
        const chartData = {
            // D·ªØ li·ªáu cho bi·ªÉu ƒë·ªì L√Ω do T·ª´ ch·ªëi
            rejectReason: {
                all: { 
                    labels: ['Low Credit Score', 'Insufficient Income', 'Incomplete Application', 'CIC Bad Debt', 'Other'], 
                    data: [40, 25, 15, 10, 10] 
                },
                unsecured: { 
                    labels: ['Insufficient Income', 'Low Credit Score', 'CIC Bad Debt', 'Application', 'Other'], 
                    data: [50, 20, 15, 10, 5] 
                },
                cc: { 
                    labels: ['Low Credit Score', 'High Limit Request', 'Already Has Card', 'Income', 'Other'], 
                    data: [40, 20, 20, 15, 5] 
                },
                bnpl: { 
                    labels: ['Incomplete Application', 'Low Credit Score', 'Unable to Verify', 'Other'], 
                    data: [50, 30, 15, 5] 
                }
            },
            // D·ªØ li·ªáu cho bi·ªÉu ƒë·ªì Ph√¢n b·ªï ƒêi·ªÉm Score
            scoreDistribution: {
                getDataset: (label, data, colorRgb) => ({
                    label: label,
                    data: data,
                    borderColor: `rgba(${colorRgb}, 1)`,
                    backgroundColor: `rgba(${colorRgb}, 0.1)`,
                    fill: true,
                    tension: 0.3
                }),
                all: function() {
                    return [
                        this.getDataset('Unsecured Loan', [10, 20, 40, 80, 50, 20, 10], '59, 130, 246'), // blue
                        this.getDataset('Credit Card', [5, 15, 30, 60, 70, 40, 20], '16, 185, 129'), // green
                        this.getDataset('BNPL', [30, 50, 60, 40, 20, 10, 5], '234, 179, 8') // yellow
                    ];
                },
                unsecured: function() {
                    return [
                        this.getDataset('Unsecured Loan', [10, 20, 40, 80, 50, 20, 10], '59, 130, 246') // blue
                    ];
                },
                cc: function() {
                    return [
                        this.getDataset('Credit Card', [5, 15, 30, 60, 70, 40, 20], '16, 185, 129') // green
                    ];
                },
                bnpl: function() {
                    return [
                        this.getDataset('BNPL', [30, 50, 60, 40, 20, 10, 5], '234, 179, 8') // yellow
                    ];
                }
            }
        };

        // --- H√ÄM V·∫º BI·ªÇU ƒê·ªí (TAB 2) ---
        function drawRejectReasonChart(product = 'all') {
            const canvas = document.getElementById('rejectReasonChart');
            if (!canvas) return; // Tho√°t n·∫øu kh√¥ng t√¨m th·∫•y canvas (khi ·ªü trang CV)
            const ctxReject = canvas.getContext('2d');
            
            if (rejectReasonChartInstance) {
                rejectReasonChartInstance.destroy();
            }

            rejectReasonChartInstance = new Chart(ctxReject, {
                type: 'doughnut',
                data: {
                    labels: chartData.rejectReason[product].labels,
                    datasets: [{
                        data: chartData.rejectReason[product].data,
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.7)', // red-500
                            'rgba(249, 115, 22, 0.7)', // orange-500
                            'rgba(234, 179, 8, 0.7)', // yellow-500
                            'rgba(139, 92, 246, 0.7)', // violet-500
                            'rgba(107, 114, 128, 0.7)' // slate-500
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { color: 'rgb(148, 163, 184)' } }
                    }
                }
            });
        }

        function drawScoreDistributionChart(product = 'all') {
            const canvas = document.getElementById('scoreDistributionChart');
            if (!canvas) return; // Tho√°t n·∫øu kh√¥ng t√¨m th·∫•y canvas
            const ctxScore = canvas.getContext('2d');

            if (scoreDistributionChartInstance) {
                scoreDistributionChartInstance.destroy();
            }
            
            scoreDistributionChartInstance = new Chart(ctxScore, {
                type: 'line',
                data: {
                    labels: ['<500', '500-550', '550-600', '600-650', '650-700', '700-750', '>750'],
                    datasets: chartData.scoreDistribution[product]()
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { color: 'rgb(148, 163, 184)' } }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: 'rgb(148, 163, 184)' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: 'rgb(148, 163, 184)' }
                        }
                    }
                }
            });
        }


        // --- S·ª∞ KI·ªÜN DOMCONTENTLOADED (CH·∫†Y KHI T·∫¢I TRANG) ---
        document.addEventListener('DOMContentLoaded', () => {
            
            const textGray = 'rgb(148, 163, 184)'; // slate-400
            
            // C√†i ƒë·∫∑t chung cho Chart.js
            Chart.defaults.color = textGray;
            Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';

            // ***** M·ªöI: LOGIC CHUY·ªÇN TRANG CH√çNH *****
            const navCv = document.getElementById('nav-cv');
            const navPortfolio = document.getElementById('nav-portfolio');
            const pageCv = document.getElementById('page-cv');
            const pagePortfolio = document.getElementById('page-portfolio');
            let chartsInitialized = false; // C·ªù ƒë·ªÉ ch·ªâ kh·ªüi t·∫°o chart 1 l·∫ßn

            navCv.addEventListener('click', () => {
                pageCv.classList.remove('hidden');
                pagePortfolio.classList.add('hidden');
                
                navCv.classList.add('nav-button-active');
                navPortfolio.classList.remove('nav-button-active');
                navPortfolio.classList.add('text-gray-400'); // ƒê·∫£m b·∫£o n√∫t kh√¥ng active c√≥ m√†u x√°m
            });

            navPortfolio.addEventListener('click', () => {
                pagePortfolio.classList.remove('hidden');
                pageCv.classList.add('hidden');
                
                navPortfolio.classList.add('nav-button-active');
                navCv.classList.remove('nav-button-active');
                navCv.classList.add('text-gray-400');

                // Ch·ªâ kh·ªüi t·∫°o charts v√†o l·∫ßn ƒë·∫ßu ti√™n nh·∫•p v√†o tab portfolio
                if (!chartsInitialized) {
                    initializeDashboardCharts();
                    chartsInitialized = true;
                }
            });
            // ***** K·∫æT TH√öC LOGIC M·ªöI *****


            // --- C√ÄI ƒê·∫∂T TAB (Dashboard) ---
            // ƒê·∫£m b·∫£o ch·ªçn ƒë√∫ng c√°c n√∫t trong page-portfolio
            const tabs = document.querySelectorAll('#page-portfolio .tab-button');
            const panels = document.querySelectorAll('#page-portfolio .tab-panel');

            // Hi·ªÉn th·ªã tab ƒë·∫ßu ti√™n khi t·∫£i trang (n·∫øu portfolio ƒë∆∞·ª£c hi·ªÉn th·ªã)
            if(tabs.length > 0) {
                tabs[0].classList.add('tab-active');
                panels[0].classList.remove('hidden');
            }

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('tab-active'));
                    tab.classList.add('tab-active');
                    const target = tab.getAttribute('data-tab');
                    panels.forEach(panel => {
                        panel.classList.add('hidden');
                    });
                    // ƒê·∫£m b·∫£o document.getElementById ho·∫°t ƒë·ªông
                    const targetPanel = document.getElementById(target);
                    if (targetPanel) {
                        targetPanel.classList.remove('hidden');
                    }
                });
            });

            // --- C√ÄI ƒê·∫∂T FILTER (TAB 2 Dashboard) ---
            const filterButtons = document.querySelectorAll('#page-portfolio .product-filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => {
                        btn.classList.remove('filter-active');
                        btn.classList.add('bg-slate-700', 'text-slate-300', 'hover:bg-slate-600');
                        btn.classList.remove('bg-blue-600', 'text-white');
                        btn.style.backgroundColor = '#334155'; // Reset style
                        btn.style.border = '1px solid #475569';
                    });
                    button.classList.add('filter-active');
                    button.classList.add('bg-blue-600', 'text-white');
                    button.classList.remove('bg-slate-700', 'text-slate-300', 'hover:bg-slate-600');
                    button.style.border = '1px solid #2e69c4'; // Active border
                    
                    const product = button.getAttribute('data-product');
                    
                    drawRejectReasonChart(product);
                    drawScoreDistributionChart(product);
                });
            });

            // --- H√†m kh·ªüi t·∫°o t·∫•t c·∫£ bi·ªÉu ƒë·ªì Dashboard ---
            function initializeDashboardCharts() {
                // --- BI·ªÇU ƒê·ªí TAB 1: T·ªîNG QUAN ---
                const ctxOverview = document.getElementById('overviewChart');
                if (ctxOverview) {
                    new Chart(ctxOverview.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['Low Risk', 'Medium Risk', 'High Risk', 'Very High Risk'],
                            datasets: [{
                                label: 'Balance (USD M)',
                                data: [500, 450, 200, 100],
                                backgroundColor: [
                                    'rgba(74, 222, 128, 0.6)', // green-400
                                    'rgba(250, 204, 21, 0.6)', // yellow-400
                                    'rgba(251, 146, 60, 0.6)', // orange-400
                                    'rgba(239, 68, 68, 0.6)',  // red-500
                                ],
                                borderColor: [
                                    'rgba(74, 222, 128, 1)',
                                    'rgba(250, 204, 21, 1)',
                                    'rgba(251, 146, 60, 1)',
                                    'rgba(239, 68, 68, 1)',
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: textGray } },
                                x: { grid: { display: false }, ticks: { color: textGray } }
                            }
                        }
                    });
                }

                const ctxDonut = document.getElementById('riskDonutChart');
                if (ctxDonut) {
                    new Chart(ctxDonut.getContext('2d'), {
                        type: 'doughnut',
                        data: {
                            labels: ['Low Risk', 'Medium Risk', 'High/Very High Risk'],
                            datasets: [{
                                data: [45, 35, 20], // T·ª∑ l·ªá %
                                backgroundColor: [
                                    'rgba(74, 222, 128, 0.7)', // green-400
                                    'rgba(250, 204, 21, 0.7)', // yellow-400
                                    'rgba(239, 68, 68, 0.7)',  // red-500
                                ],
                                hoverOffset: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { position: 'bottom', labels: { color: textGray } } }
                        }
                    });
                }

                // --- BI·ªÇU ƒê·ªí TAB 2: PH√ÇN KH√öC & TH·∫®M ƒê·ªäNH ---
                drawRejectReasonChart('all');
                drawScoreDistributionChart('all');

                // --- BI·ªÇU ƒê·ªí TAB 3: HI·ªÜU SU·∫§T & XU H∆Ø·ªöNG ---
                const ctxTrends1 = document.getElementById('trendsChart1');
                if(ctxTrends1) {
                    new Chart(ctxTrends1.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['M1', 'M2', 'M3', 'M4', 'M5', 'M6', 'M7', 'M8', 'M9', 'M10', 'M11', 'M12'],
                            datasets: [{
                                label: 'NPL Rate (%)',
                                data: [2.8, 2.9, 3.0, 2.8, 3.1, 3.3, 3.4, 3.2, 3.0, 3.1, 3.2, 3.15],
                                borderColor: 'rgba(239, 68, 68, 1)', // red-500
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                fill: true,
                                tension: 0.3
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: { beginAtZero: false, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: textGray } },
                                x: { grid: { display: false }, ticks: { color: textGray } }
                            }
                        }
                    });
                }

                const ctxVintage = document.getElementById('vintageChart');
                if(ctxVintage) {
                    new Chart(ctxVintage.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['MOB 1', 'MOB 2', 'MOB 3', 'MOB 4', 'MOB 5', 'MOB 6', 'MOB 7', 'MOB 8'], // MOB = Month on Book
                            datasets: [
                                {
                                    label: 'Cohort M1/2024',
                                    data: [0.5, 0.8, 1.2, 1.5, 1.9, 2.1, 2.2, 2.3],
                                    borderColor: 'rgba(239, 68, 68, 1)', // red-500
                                    tension: 0.1,
                                    fill: false
                                },
                                {
                                    label: 'Cohort M2/2024',
                                    data: [0.4, 0.7, 1.1, 1.4, 1.8, 2.0, 2.1, null],
                                    borderColor: 'rgba(249, 115, 22, 1)', // orange-500
                                    tension: 0.1,
                                    fill: false
                                },
                                {
                                    label: 'Cohort M3/2024',
                                    data: [0.6, 0.9, 1.3, 1.7, 2.0, 2.2, null, null],
                                    borderColor: 'rgba(234, 179, 8, 1)', // yellow-500
                                    tension: 0.1,
                                    fill: false
                                },
                                {
                                    label: 'Cohort M4/2024',
                                    data: [0.5, 0.8, 1.2, 1.6, 1.9, null, null, null],
                                    borderColor: 'rgba(59, 130, 246, 1)', // blue-500
                                    tension: 0.1,
                                    fill: false
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { position: 'bottom', labels: { color: textGray } } },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { 
                                        color: textGray,
                                        callback: function(value) { return value + '%' }
                                    },
                                    title: { display: true, text: 'DPD 30+ Rate (%)', color: textGray }
                                },
                                x: {
                                    grid: { display: false },
                                    ticks: { color: textGray },
                                    title: { display: true, text: 'Month on Book', color: textGray }
                                }
                            }
                        }
                    });
                }
            } // K·∫øt th√∫c h√†m initializeDashboardCharts

        });
    </script>
</body>
</html>
